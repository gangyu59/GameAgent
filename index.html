<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>二人围棋</title>
    <!-- 依赖库 -->
    <script src="https://cdn.jsdelivr.net/npm/peerjs@1.4.7/dist/peerjs.min.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-database.js"></script>
    
    <!-- 样式 -->
    <link rel="stylesheet" href="css/style.css">
</head>
<body>
    <div id="board"></div>
    <div id="debug-panel" style="position:fixed; bottom:0; background:#f5f5f5; padding:10px; width:100%;">
        <h3>调试信息</h3>
        <div id="debug-log"></div>
    </div>

    <!-- 所有JS按顺序加载 -->
    <script src="js/firebase-init.js"></script>
    <script src="js/webrtc-conn.js"></script>
    <script src="js/game-logic.js"></script>
    <script src="js/ui-render.js"></script>
    <script src="js/utils.js"></script>
    
    <script>
        // 全局状态（确保在最后加载）
        window.game = {
            players: [],
            currentPlayer: 'black',
            boardSize: 19
        };
        
        // 安全启动（DOM完全加载后）
        document.addEventListener('DOMContentLoaded', () => {
            console.log("系统启动完成");
        });
    </script>
		<div id="mobile-console" style="
  position: fixed; 
  top: 0; 
  left: 0; 
  width: 100%; 
  height: 200px; 
  background: rgba(0,0,0,0.8); 
  color: white; 
  overflow: auto;
  z-index: 9999;
">
  <button onclick="this.parentNode.remove()" style="float:right">关闭</button>
  <div id="console-log"></div>
</div>

<script>
// 重写console方法
const originalConsole = {...console};
window.console = {
  log: (...args) => {
    originalConsole.log(...args);
    document.getElementById('console-log').innerHTML += 
      `<div style="color:#0f0">${args.join(' ')}</div>`;
  },
  error: (...args) => {
    originalConsole.error(...args);
    document.getElementById('console-log').innerHTML += 
      `<div style="color:#f00">${args.join(' ')}</div>`;
  }
};
</script>
</body>
</html>